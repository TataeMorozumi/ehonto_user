{% extends "base.html" %}  <!-- âœ… æœ€åˆã«é…ç½® -->

{% load static %}  <!-- âœ… `extends` ã®ã™ãå¾Œã«é…ç½® -->

{% block content %}

<!-- âœ… å­ã©ã‚‚ã”ã¨ã®æœ¬æ£šé¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ + ã‚¢ã‚¤ã‚³ãƒ³ -->
<div class="child-selector">
    <label for="child">æœ¬æ£šã‚’é¸æŠ:</label>
    <select name="child_id" id="child" onchange="changeBookshelf()">
        <option value="{% url 'home' %}" {% if not selected_child_id %}selected{% endif %}>å…±é€šã®æœ¬æ£š</option>
    
        {% for child in children %}
            <option value="{% url 'child_bookshelf' child.id %}" {% if selected_child_id == child.id|stringformat:"s" %}selected{% endif %}>
                {{ child.name }}
            </option>
        {% endfor %}
    </select>
    

    <!-- âœ… ã‚¢ã‚¤ã‚³ãƒ³ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  -->
    <a href="{% url 'child_edit' %}" class="child-edit-icon">ğŸ“</a>
</div>

<!-- âœ… ç™»éŒ²ã•ã‚ŒãŸçµµæœ¬ã®è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
<div class="book-container">
    {% for book in books %}
        {% if book.image %}
            <div class="book-item">
                <a href="{% url 'book_detail' book.id %}">
                    <img src="{{ book.image.url }}" alt="{{ book.title }}" class="book-image">
                </a>
            </div>
        {% endif %}
    {% empty %}
        <p class="text-center">ã“ã®æœ¬æ£šã«ã¯ã¾ã çµµæœ¬ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endfor %}
</div>

<!-- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
<div class="pagination">
    {% if page_obj.has_previous %}
        <a href="?page=1">æœ€åˆ</a>
        <a href="?page={{ page_obj.previous_page_number }}">å‰ã¸</a>
    {% endif %}

    <span>ãƒšãƒ¼ã‚¸ {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">æ¬¡ã¸</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">æœ€å¾Œ</a>
    {% endif %}
</div>

<!-- âœ… ã€Œï¼‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã -->
<a href="#" class="add-button" onclick="event.preventDefault(); loadAddBookModal('{{ selected_child.id }}');">ï¼‹</a>

<!-- âœ… ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ -->
<div id="addBookModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div id="modal-body">
            <!-- ã“ã“ã« `/add_book/` ã®ãƒ•ã‚©ãƒ¼ãƒ ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ -->
        </div>
    </div>
</div>
{% endblock %}
